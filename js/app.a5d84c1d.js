(function(){"use strict";var t={8156:function(t,e,n){var a=n(5130),o=n(6768),i=n(4232),r=n(144);const s=async t=>{await fetch("https://66ad0a17f009b9d5c734361b.mockapi.io/api/v1/timer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((t=>{if(!t.ok)throw new Error("Ошибка запроса"+t.statusText);return t.json()})).catch((t=>{console.error("Error:",t)}))},l=async()=>{try{const t=await fetch("https://66ad0a17f009b9d5c734361b.mockapi.io/api/v1/timer"),e=await t.json();return e}catch(t){console.error("Ошибка при загрузке данных:",t)}},c=async(t,e)=>{await fetch("https://66ad0a17f009b9d5c734361b.mockapi.io/api/v1/timer/"+t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>{if(!t.ok)throw new Error("Ошибка запроса"+t.statusText)})).catch((t=>{console.error("Error:",t)}))};n(4114);const u={events:(0,r.KR)({}),$on(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},$emit(t,e){this.events[t]&&this.events[t].forEach((t=>t(e)))}};var d=u;const p={class:"input-group mb-3"};var f={__name:"CreateTimer",setup(t){const e=(0,r.KR)(""),n=(0,r.KR)("60");let c=(0,r.KR)(!1),u=(0,r.KR)(Math.floor((new Date).getTime()));const f=function(t){u.value=t};d.$on("currentTime",f);const m=async function(){if(n.value){c.value=!1;const t={description:e.value,createdAt:u.value,finishAt:u.value+6e4*n.value,duration:60*n.value,howLong:"",status:"play"};await s(t),d.$emit("timers",await l())}else c.value=!0};return(t,s)=>((0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control",placeholder:"Краткое описание таймера","onUpdate:modelValue":s[0]||(s[0]=t=>e.value=t)},null,512),[[a.Jo,e.value]]),(0,o.bo)((0,o.Lk)("input",{type:"number",min:"1",class:(0,i.C4)(["form-control flex-grow-0-2",{"is-invalid":(0,r.R1)(c),"is-valid":!(0,r.R1)(c)}]),placeholder:"Время таймера","onUpdate:modelValue":s[1]||(s[1]=t=>n.value=t),required:""},null,2),[[a.Jo,n.value,void 0,{number:!0}]]),(0,o.Lk)("button",{class:"btn btn-primary",onClick:s[2]||(s[2]=t=>m(n.value))}," Запустить ")])]))}};const m=f;var v=m;function b(t){const e=t.getFullYear(),n=t.getMonth()+1,a=t.getDate(),o=t.getHours(),i=t.getMinutes(),r=n.toString().padStart(2,"0"),s=a.toString().padStart(2,"0"),l=o.toString().padStart(2,"0"),c=i.toString().padStart(2,"0");return`${e}-${r}-${s} ${l}:${c}`}function h(t){const e=new Date(t),n=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${n}-${a}-${o}`}const g={class:"timer"},y={class:"timer-info"},k={key:0,class:"timer-controls"},w=["disabled"],L=["disabled"],C={key:1,class:"text-bg-danger p-3 timer-done"};var E={__name:"TimerItem",props:{item:{type:Object,required:!0}},setup(t){const e=t;let n=(0,r.KR)(Math.floor((new Date).getTime()));const a=function(t){n.value=t};d.$on("currentTime",a);const s=async function(t){await c(t,{finishAt:e.item.finishAt+(n.value-e.item.howLong),status:"play",howLong:""}),d.$emit("timers",await l())},u=async function(t){console.log("когда остановили",n.value),await c(t,{howLong:n.value,status:"pause"}),d.$emit("timers",await l())},p=async function(t){await c(t,{finishAt:n.value,status:"stop",howLong:""}),d.$emit("timers",await l())};return(t,a)=>{const l=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",y,[(0,o.Lk)("b",null,(0,i.v_)(e.item.id),1),(0,o.Lk)("p",null,(0,i.v_)(e.item.description),1),(0,o.Lk)("p",null,(0,i.v_)((0,r.R1)(b)(new Date(e.item.createdAt))),1),(0,o.Lk)("p",null,(0,i.v_)((0,r.R1)(b)(new Date(e.item.finishAt))),1),(0,o.Lk)("p",null,(0,i.v_)(e.item.duration/60),1)]),(0,r.R1)(n)<e.item.finishAt||e.item.howLong?((0,o.uX)(),(0,o.CE)("div",k,[(0,o.Lk)("button",{class:"btn btn-danger timer-stop",onClick:a[0]||(a[0]=t=>p(e.item.id))},[(0,o.bF)(l,{icon:"stop"})]),(0,o.Lk)("button",{class:"btn btn-warning timer-pause",disabled:"pause"===e.item.status,onClick:a[1]||(a[1]=t=>u(e.item.id))},[(0,o.bF)(l,{icon:"pause"})],8,w),(0,o.Lk)("button",{class:"btn btn-success timer-play",disabled:"play"===e.item.status,onClick:a[2]||(a[2]=t=>s(e.item.id))},[(0,o.bF)(l,{icon:"play"})],8,L)])):((0,o.uX)(),(0,o.CE)("div",C,"Завершено"))])}}};const S=E;var T=S;const _={class:"accordion",id:"accordionExample"},O=["id"],$=["data-bs-target","aria-controls"],j=["id","aria-labelledby"],x={class:"accordion-body"},A={class:"list-group"},R=(0,o.Lk)("li",{class:"list-group-item list-header"},[(0,o.Lk)("b",null,"#"),(0,o.Lk)("b",null,"Описание"),(0,o.Lk)("b",null,"Время запуска"),(0,o.Lk)("b",null,"Время завершения"),(0,o.Lk)("b",null,"Длит."),(0,o.Lk)("b")],-1);var F={__name:"TimerList",setup(t){const e=(0,r.KR)([]),n=t=>{e.value=[];const n=(0,r.Kh)(new Map);for(let e in t)n.set(h(t[e].createdAt),[]);for(let e in t)n.get(h(t[e].createdAt)).push(t[e]);n.forEach(((t,n)=>{e.value.push({date:n,timers:t})}))};return(0,o.sV)((async()=>{n(await l()),d.$on("timers",n)})),(t,n)=>((0,o.uX)(),(0,o.CE)("div",_,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.value,((t,e)=>((0,o.uX)(),(0,o.CE)("div",{class:"accordion-item",key:e},[(0,o.Lk)("h2",{class:"accordion-header",id:"heading"+e},[(0,o.Lk)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse"+e,"aria-expanded":"true","aria-controls":"collapse"+e},(0,i.v_)(t.date),9,$)],8,O),(0,o.Lk)("div",{id:"collapse"+e,class:"accordion-collapse collapse show","aria-labelledby":"headingOne"+e,"data-bs-parent":"#accordionExample"},[(0,o.Lk)("div",x,[(0,o.Lk)("ul",A,[R,((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.timers,(t=>((0,o.uX)(),(0,o.CE)("li",{class:"list-group-item",key:t.id,"aria-current":"true"},[(0,o.bF)(T,{item:t},null,8,["item"])])))),128))])])],8,j)])))),128))]))}};const K=F;var M=K;const X={class:"appTimer"};var D={__name:"App",setup(t){const e=()=>{d.$emit("currentTime",Math.floor((new Date).getTime()))};let n;return(0,o.sV)((()=>{n=setInterval(e,1e3)})),(0,o.hi)((()=>{clearInterval(n)})),(t,e)=>((0,o.uX)(),(0,o.CE)("div",X,[(0,o.bF)(v),(0,o.bF)(M)]))}};const P=D;var I=P,V=n(8950),J=n(292),Y=n(2353),N=(n(8077),n(8767));V.Yv.add(Y.APi,Y.G1Y,Y.ijD);const U=(0,a.Ef)(I);U.component("font-awesome-icon",J.gc),U.use(N.BootstrapVueNext),U.mount("#app")}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,i){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],i=t[u][2];for(var s=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(s=!1,i<r&&(r=i));if(s){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[a,o,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,i,r=a[0],s=a[1],l=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(l)var u=l(n)}for(e&&e(a);c<r.length;c++)i=r[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(u)},a=self["webpackChunkjust_work"]=self["webpackChunkjust_work"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],(function(){return n(8156)}));a=n.O(a)})();
//# sourceMappingURL=app.a5d84c1d.js.map